# 2022å¹´06æœˆ25æ—¥
## å¤´æ¡

[æ“ä½œç³»ç»Ÿå°é—­ã€åå°ä¿å®ˆï¼Œä¸ºä»€ä¹ˆå‰ç«¯ä»èƒ½ä¸€è·¯ç‹‚å¥”ï¼Ÿ](https://toutiao.io/k/g3zj915)

[ä»€ä¹ˆæ˜¯äººæ‰æ¢¯é˜Ÿï¼Œä½ åœ¨ç¬¬å‡ æ¢¯é˜Ÿï¼Ÿ](https://toutiao.io/k/kojvwp8)

[èŠèŠgoä¸­çš„é€ƒé€¸åˆ†æ](https://toutiao.io/k/gvpsq14)

[Springæ¶æ„ç³»åˆ— - æ·±å…¥æµ…å‡ºSpringæ ¸å¿ƒä¹‹é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)](https://toutiao.io/k/x6shaod)

[sessionã€tokenã€jwtã€oauth2 å‚»å‚»åˆ†ä¸æ¸…](https://toutiao.io/k/aynlgft)

[ç¾å›¢åŸºäº Flink çš„å®æ—¶æ•°ä»“å¹³å°å»ºè®¾æ–°è¿›å±•](https://toutiao.io/k/nt67pl6)

[ã€ç²¾è¿›C++ã€‘ç°ä»£C++ç™½çš®ä¹¦ï¼šåœ¨æ‹¥æŒ¤å’Œå˜åŒ–çš„ä¸–ç•Œä¸­èŒå£®æˆé•¿  C++ 2006â€“2020](https://toutiao.io/k/e2otnbn)

[æ‹¼å¤šå¤šå¤§æ•°æ®å¼€å‘ 1 é¢çŸ¥è¯†ç‚¹æ€»ç»“ï¼ˆé…è§†é¢‘~è¶…è¯¦ç»†ï¼‰](https://toutiao.io/k/d334v01)

[Goè¯­è¨€ä¸‰ä¸ªé«˜æ•ˆç¼–ç¨‹çš„æŠ€å·§](https://toutiao.io/k/kzxcd9l)

[å…³äºæˆ‘åœ¨Bç«™ç”¨çˆ¬è™«å®Œç¾è§£å†³æ­Œè’è¿™ä»¶äº‹~](https://toutiao.io/k/giryvwz)

[CVPR 2022 | ç¾å›¢æŠ€æœ¯å›¢é˜Ÿç²¾é€‰è®ºæ–‡è§£è¯»](https://toutiao.io/k/t3w3nxu)

[Istioï¼šKubernetes ä¹‹åçš„äº‘åŸç”ŸæŠ€æœ¯â€œæ‰›æŠŠå­â€](https://toutiao.io/k/1vve2f7)

[çœ‹äº†å°±ä¼šçš„ Node.js å¸¸ç”¨ä¸‰æ–¹å·¥å…·åŒ…](https://toutiao.io/k/prwmpay)

[æºç¨‹åŸºäº GraphQL çš„å‰ç«¯ BFF æœåŠ¡å¼€å‘å®è·µ](https://toutiao.io/k/gzcpjoi)

[ä½¿ç”¨ Loki å¾®æœåŠ¡æ¨¡å¼éƒ¨ç½²ç”Ÿäº§é›†ç¾¤](https://toutiao.io/k/44jae05)

[ç»“åˆå®æ“å¸¦ä½ åƒé€RedisæŒä¹…åŒ–](https://toutiao.io/k/1u6o78n)

[[æ¨è] æˆ‘ä»¬å…¬å¸ä½¿ç”¨äº† 5 å¹´çš„ç³»ç»Ÿé™æµæ–¹æ¡ˆï¼ä»å®ç°åˆ°éƒ¨ç½²å®æˆ˜è¯¦è§£ï¼Œç¨³çš„ä¸€æ‰¹!â€‹](https://toutiao.io/k/4tls39t)

[[æ¨è] é«˜å¹¶å‘ä¸‹å¦‚ä½•é˜²é‡ï¼Ÿ](https://toutiao.io/k/ulsc0so)

[[æ¨è] è‚äº†ä¸€ä¸ªæœˆçš„ DDDï¼Œä¸€æ–‡å¸¦ä½ æŒæ¡ï¼](https://toutiao.io/k/bclz2n6)

[[æ¨è] Rediså¤ºå‘½52è¿é—®](https://toutiao.io/k/he3fzao)



## code

[ç²‰åˆ·æˆ¿å­](https://leetcode.cn/problems/JEj789)



## æ¯æ—¥ä¸€é¢˜

```go
                  è¿™é“é¢˜çœ‹èµ·æ¥å¾ˆè¿·æƒ‘ï¼Œç›®æµ‹å¾ˆå¤šäººå¯èƒ½ä¼šç­”é”™ã€‚ä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿï¼ˆè¿™æ˜¯æ¥è‡ª ã€ŠGoçˆ±å¥½è€…å‘¨åˆŠã€‹çš„ä¸€é“é¢˜ç›®ï¼Œæ­£ç¡®ç‡æ‰ 12%ï¼‰
package main

import (
    "encoding/json"
    "fmt"
    "time"
)

func main() {
    t := struct {
        time.Time
        N int
    }{
        time.Date(2020, 12, 20, 0, 0, 0, 0, time.UTC),
        5,
    }

    m, _ := json.Marshal(t)
    fmt.Printf("%s", m)
}

Aï¼š{"Time": "2020-12-20T00:00:00Z", "N": 5 }ï¼›Bï¼š"2020-12-20T00:00:00Z"ï¼›Cï¼š{"N": 5}ï¼›Dï¼š<nil>

                  
                    æŸ¥çœ‹ç­”æ¡ˆ
                  
                
                  ç­”æ¡ˆè§£æï¼š
                  æ­£ç¡®ç­”æ¡ˆ Bï¼Œä½†ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå¤§å®¶ä¸ç”¨åœ¨ä¹æ˜¯ä¸æ˜¯åˆé’»çš„é¢˜ç›®ï¼Œé€šè¿‡é¢˜ç›®èƒ½å­¦åˆ°çŸ¥è¯†æ‰æ˜¯æœ€é‡è¦çš„ã€‚
01
å¯¹ä¸€ä¸ªç»“æ„ä½“å®ä¾‹è¿›è¡Œ json ç³»åˆ—åŒ–ï¼Œç›´è§‰å¾ˆå®¹æ˜“é€‰ Aã€‚ä½†å¾ˆæ˜¾ç„¶ï¼Œä¸å¯èƒ½è¿™ä¹ˆç®€å•ï¼Œå› æ­¤éœ€è¦ä»”ç»†çœ‹ä»£ç ã€‚è‡³äºé€‰ C å’Œ D çš„äººï¼Œå¤šåŠæ˜¯ççŒœçš„å§ï¼Œå½“ç„¶é€‰ B ä¹Ÿä¸æ’é™¤æœ‰ççŒœçš„ã€‚
ä¸ºä»€ä¹ˆé€‰ B å‘¢ï¼Ÿæˆ‘æƒ³å€ŸåŠ©ä¸€ä¸ªä¾‹å­è®²è§£ã€‚
package main

import (
	"encoding/json"
  "fmt"
)

type Person struct {
  name  string
  hobby string
}	

func main() {
  person := Person{name: "polarisxu", hobby: "Golang"}
  m, _ := json.Marshal(person)
  fmt.Printf("%s", m)
}

å¦‚æœä½ è®¤ä¸ºè¾“å‡º {"name":"polarisxu","hobby":"Golang"}ï¼Œé‚£ä½ å¾—å»è¡¥è¡¥ encoding/json åŒ…çš„çŸ¥è¯†äº†ã€‚è¦æƒ³è¾“å‡º  {"name":"polarisxu","hobby":"Golangâ€}ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šè¿™ä¹ˆåšï¼šå°† Person çš„å­—æ®µå¯¼å‡ºï¼ŒåŒæ—¶è®¾ç½®ä¸Š tagã€‚
type Person struct {
  Name  string `json:"name"`
  Hobby string `json:"hobby"`
}

ä½†å¦‚æœæˆ‘ä»¬ä¸æƒ³å¯¼å‡º Person çš„å­—æ®µå‘¢ï¼Ÿå¯ä»¥é€šè¿‡å®ç° Marshaler æ¥åšåˆ°ã€‚
func (p Person) MarshalJSON() ([]byte, error) {
	return []byte(`{"name":"`+p.name+`","hobby":"`+p.hobby+`"}`), nil
}

02
å›åˆ°é¢˜ç›®ä¸Šï¼Œtime.Time æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ
type Time struct {
    // contains filtered or unexported fields
}

è¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰å¯¼å‡ºä»»ä½•å­—æ®µçš„ç»“æ„ä½“ç±»å‹ï¼Œå› æ­¤å®ƒè‚¯å®šå®ç°äº† Marshaler æ¥å£ã€‚
// MarshalJSON implements the json.Marshaler interface.
// The time is a quoted string in RFC 3339 format, with sub-second precision added if present.
func (t Time) MarshalJSON() ([]byte, error) {
	if y := t.Year(); y < 0 || y >= 10000 {
		// RFC 3339 is clear that years are 4 digits exactly.
		// See golang.org/issue/4556#c15 for more discussion.
		return nil, errors.New("Time.MarshalJSON: year outside of range [0,9999]")
	}

	b := make([]byte, 0, len(RFC3339Nano)+2)
	b = append(b, '"')
	b = t.AppendFormat(b, RFC3339Nano)
	b = append(b, '"')
	return b, nil
}

è¿™ä¹ˆè¯´ï¼Œç­”æ¡ˆä¸åº”è¯¥å°±æ˜¯ A å—ï¼Ÿåˆ«æ€¥ã€‚
03
å¦‚æœ t æ˜¯è¿™ä¹ˆå®šä¹‰çš„ï¼š
t := struct {
  Time time.Time
  N int
}{
  time.Date(2020, 12, 20, 0, 0, 0, 0, time.UTC),
  5,
}

é‚£ç»“æœå°±æ˜¯ Aã€‚è€Œé¢˜ç›®ä¸­ï¼Œtime.Time æ˜¯å†…åµŒçš„ã€‚ä½ å­¦ä¹  Go æ—¶ï¼Œåº”è¯¥çœ‹è¿‡é€šè¿‡å†…åµŒæ¥æ¨¡æ‹Ÿç»§æ‰¿çš„åŠŸèƒ½å§ï¼
æ­£æ˜¯å› ä¸ºå†…åµŒï¼Œt çš„æ–¹æ³•é›†åŒ…æ‹¬äº† time.Time çš„æ–¹æ³•é›†ï¼Œæ‰€ä»¥ï¼Œt è‡ªåŠ¨å®ç°äº† Marshaler æ¥å£ã€‚å› æ­¤ç­”æ¡ˆæ˜¯ Bã€‚
å…¶å®è¿™é“é¢˜çš„æƒ…å†µï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­è¿˜çœŸæœ‰å¯èƒ½é‡åˆ°ã€‚æ‰€ä»¥ï¼Œå½“ä½ å†…åµŒæŸä¸ªç±»å‹æ—¶ï¼Œç‰¹åˆ«è¿™ä¸ªç±»å‹ä¸æ˜¯ä½ è‡ªå·±å®šä¹‰çš„ï¼Œéœ€è¦ç•™æ„è¿™ç§æƒ…å†µã€‚
ä¸€èˆ¬è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š1ï¼‰ä¸å†…åµŒï¼›2ï¼‰é‡æ–°å®ç° MarshalJSON æ–¹æ³•ã€‚
ç„¶è€Œè¿™é“é¢˜æ— æ³•é‡æ–°å®ç° MarshalJSON æ–¹æ³•ï¼Œå› ä¸ºç»“æ„ä½“ç±»å‹æ˜¯åŒ¿åçš„ã€‚åªèƒ½é€šè¿‡ä¸å†…åµŒæ¥å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚
04
æœ€åä¸€èµ·çœ‹ä¸‹ json.Marshal å‡½æ•°çš„æ–‡æ¡£ï¼Œä¸»è¦çœ‹ä¸‹é¢è¿™æ®µï¼š

Marshal traverses the value v recursively. If an encountered value implements the Marshaler interface and is not a nil pointer, Marshal calls its MarshalJSON method to produce JSON. If no MarshalJSON method is present but the value implements encoding.TextMarshaler instead, Marshal calls its MarshalText method and encodes the result as a JSON string. The nil pointer exception is not strictly necessary but mimics a similar, necessary exception in the behavior of UnmarshalJSON.

å¤§æ„æ˜¯è¯´ï¼Œå¦‚æœå€¼å®ç°äº† json.Marshaler æ¥å£å¹¶ä¸”ä¸æ˜¯ nil æŒ‡é’ˆï¼Œåˆ™ Marshal å‡½æ•°ä¼šè°ƒç”¨å…¶ MarshalJSON æ–¹æ³•ä»¥ç”Ÿæˆ JSONã€‚å¦‚æœä¸å­˜åœ¨ MarshalJSON æ–¹æ³•ï¼Œä½†è¯¥å€¼å®ç° encoding.TextMarshaler æ¥å£ï¼Œåˆ™ Marshal å‡½æ•°è°ƒç”¨å…¶ MarshalText æ–¹æ³•å¹¶å°†ç»“æœç¼–ç ä¸º JSON å­—ç¬¦ä¸²ã€‚
å¯è§ï¼Œjson.Marshal å‡½æ•°ä¼˜å…ˆè°ƒç”¨ MarshalJSONï¼Œç„¶åæ˜¯ MarshalTextï¼Œå¦‚æœéƒ½æ²¡æœ‰ï¼Œæ‰ä¼šèµ°æ­£å¸¸çš„ç±»å‹ç¼–ç é€»è¾‘ã€‚
ç­”æ¡ˆè§£ææ¥è‡ªï¼šhttps://polarisxu.studygolang.com/posts/go/action/weekly-question-embed-time/

                
```


## äº§å“ç»ç†

[â€œåšäº§å“2å¹´è–ªèµ„æ²¡è¿‡ä¸‡ï¼Œæˆ‘åˆ°åº•å·®åœ¨å“ªï¼Ÿâ€](http://www.woshipm.com/online/5448690.html)

[ç½‘çº¢å¼éœ²è¥ï¼Œé€€ğŸ¤ºé€€ğŸ¤ºé€€ğŸ¤º](http://www.woshipm.com/it/5489102.html)

[ç¬¦å· Â· ç¤¾äº¤ï¼šå…ƒå®‡å®™ä¸‹æ•°å­—è—å“çš„ç ´åœˆ](http://www.woshipm.com/it/5500457.html)

[ä¸æGMVï¼Œ618ç”µå•†å¹³å°è¦è®²ä»€ä¹ˆ](http://www.woshipm.com/it/5501118.html)

[Wi-Fi 7 æ¥å•¦ï¼Œå®ƒåˆ°åº•æœ‰å¤šå¼ºï¼Ÿ](http://www.woshipm.com/it/5501265.html)

[ç„¦è™‘çš„å¹´è½»äººï¼Œå¼€å§‹é€ƒç¦»å«å–å¼ç›´æ’­é—´](http://www.woshipm.com/marketing/5501219.html)

[å¯ç”¨æ€§æµ‹è¯•æº¯æºï¼š5ä¸ªäººå°±å¤Ÿäº†ï¼Ÿ](http://www.woshipm.com/user-research/5500029.html)

[å“ç‰Œï¼Œæ¥1TBåå‘ä¼ æ’­ï¼Ÿ](http://www.woshipm.com/marketing/5499701.html)

[ä¸åšèŒåœºé€æ˜äººï¼Œå¦‚ä½•è®©å·¥ä½œæˆæœå¯è§†åŒ–ï¼Ÿ](http://www.woshipm.com/zhichang/5497129.html)

[ç›´æ’­ç”µå•†ï¼Œåˆšåˆšå¼€å§‹](http://www.woshipm.com/it/5501086.html)

[ä¹°ä»¶Tæ¤ä¹Ÿè¦ç­‰åŠä¸ªæœˆï¼Œæ¶ˆè´¹è€…ä¸ºä»€ä¹ˆèƒ½â€œå¿â€ï¼Ÿ](http://www.woshipm.com/it/5500862.html)

[å±ˆè‡£æ°ç§åŸŸå…¨è§¦ç‚¹è¿è¥ï¼Œå…¨ä½“ç³»é¦–æ¬¡æ‹†è§£](http://www.woshipm.com/operate/5298724.html)

[æ–‡æ¡ˆçš„è½¯ä¸ç¡¬](http://www.woshipm.com/copy/5500333.html)

[æ‰‹æœºè¯¦æƒ…é¡µå¦‚ä½•å–çˆ†è´§ï¼Ÿå…ˆæŒæ¡ç»å…¸çš„ç‰ˆå¼å››åŸåˆ™ï¼](http://www.woshipm.com/ucd/5501075.html)

[å¤§å‚èµ„æ·±äº§å“ä¸“å®¶æ‰‹æŠŠæ‰‹æ•™å­¦ï¼3æ‹›æ•™ä½ åšå‡ºâ€œå§åº•â€çº§åˆ«çš„ç«å“åˆ†æ](http://www.woshipm.com/open/5501100.html)

[5åˆ†é’ŸGETã€Œç°æœ‰äº§å“è°ƒç ”åˆ†æå®è·µæ–¹æ³•è®ºã€](http://www.woshipm.com/pd/5498199.html)

[ä¼ä¸šè‡ªå»ºç›´æ’­å¸¦è´§ï¼šæ˜¯ä»ä¸€ä¸ªå‘ï¼Œè·³è¿›äº†å¦ä¸€ä¸ªå‘ï¼Ÿ](http://www.woshipm.com/it/5501073.html)

[Appâ€œç›‘å¬ç”¨æˆ·â€æŠ•æ”¾å¹¿å‘Šï¼Ÿè¿™å…¶å®æ˜¯ä¸ªé”™è§‰](http://www.woshipm.com/it/5500940.html)

[æµ…æCRMç³»ç»Ÿçš„ç”¨æˆ·æƒé™ç®¡ç†](http://www.woshipm.com/operate/5495372.html)

[Bç«™å¸¦è´§å½“å­¦æ–°ä¸œæ–¹](http://www.woshipm.com/it/5500072.html)


